@startuml ConsoleApplication.Run
title ConsoleApplication.Run
start
#LightBlue:var choose = default(string[])
var saveForegrondColor = ForegroundColor;
:BeforeRun(args);
:RunApp = true;
repeat
    :PrintScreen();
    :choose = ReadLine().ToLower().Split(',', StringSplitOptions.RemoveEmptyEntries);
    #LightBlue:var chooseIterator = choose.GetEnumerator();
    :BeforeExecution();
    :ForegroundColor = saveForegrondColor;
    while (RunApp && chooseIterator.MoveNext()) is (<color:green>yes)
        #LightBlue:var actions = MenuItems.Where(m => m.IsDisplayed && (m.Key.Equals(chooseIterator.Current) || m.OptionalKey.Equals(chooseIterator.Current)));
        #LightBlue:var actionIterator = actions.GetEnumerator();
        while (RunApp && actionIterator.MoveNext()) is (<color:green>yes)
            :actionIterator.Current?.Action(actionIterator.Current);
        endwhile (<color:red>no)
        :RunApp = RunApp && chooseIterator.Current.Equals("x") == false;
        :StopProgressBar();
    endwhile (<color:red>no)
    :AfterExecution();
repeat while (RunApp) is (<color:green>yes)
:AfterRun();
stop
@enduml
